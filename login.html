<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Friends Cart - Premium Login</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="css/login.css">
</head>
<body>
  <!-- Floating Particles -->
  <div class="particles" id="particles"></div>
  
  <!-- Main Content -->
  <div class="auth-container">
    <div class="auth-card">
      <div class="auth-header">
        <div class="logo">Friends Cart</div>
        <div class="auth-title">Welcome back to your shopping community</div>
      </div>
      
      <div class="auth-form">
        <form id="loginForm">
          <div class="form-group">
            <i class="fas fa-envelope form-icon"></i>
            <input type="email" class="form-input" placeholder="Email Address" required>
          </div>
          
          <div class="form-group">
            <i class="fas fa-lock form-icon"></i>
            <input type="password" class="form-input" placeholder="Password" required>
          </div>
          
          <div class="forgot-password">
            <a href="#" id="forgotPasswordLink">Forgot your password?</a>
          </div>
          
          <button type="submit" class="submit-btn" id="loginBtn">Login to Your Account</button>
          
          <div class="switch-link">
            New to Friends Cart? <a href="register.html">Create an account</a>
          </div>
        </form>
      </div>
    </div>
  </div>
  
  <!-- OTP Modal -->
  <div class="modal-overlay" id="otpModal">
    <div class="otp-modal">
      <button class="close-modal" id="closeModal">&times;</button>
      <div class="modal-header">
        <h2 class="modal-title">Reset Password</h2>
        <p class="modal-subtitle">Enter your email to receive OTP</p>
      </div>
      <div class="form-group">
        <i class="fas fa-envelope form-icon"></i>
        <input type="email" class="form-input" id="resetEmail" placeholder="Your email address" required>
      </div>
      <button class="modal-btn" id="sendOtpBtn">Send OTP</button>
      
      <div id="otpSection" style="display: none;">
        <div class="modal-header">
          <h2 class="modal-title">Enter OTP</h2>
          <p class="modal-subtitle">We've sent a 4-digit code to your email</p>
        </div>
        <div class="otp-inputs">
          <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
          <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
          <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
          <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
        </div>
        <button class="modal-btn" id="verifyOtpBtn">Verify OTP</button>
      </div>
    </div>
  </div>
  
  <!-- Success Animation -->
  <div class="success-animation" id="successAnimation">
    <div>
      <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
        <circle class="checkmark-circle" cx="26" cy="26" r="25" fill="none"/>
        <path class="checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
      </svg>
      <div class="success-text">Login Successful!</div>
    </div>
  </div>

  <script>
    // Updated Bubble Particles
    const particlesContainer = document.getElementById('particles');
    const particleCount = 15;
    
    for (let i = 0; i < particleCount; i++) {
      const particle = document.createElement('div');
      particle.classList.add('particle');
      
      // Random size between 50px and 150px
      const size = Math.random() * 100 + 50;
      particle.style.width = `${size}px`;
      particle.style.height = `${size}px`;
      
      // Random position
      particle.style.left = `${Math.random() * 100}%`;
      
      // Random animation duration and delay
      const duration = Math.random() * 20 + 10;
      particle.style.animationDuration = `${duration}s`;
      particle.style.animationDelay = `${Math.random() * 10}s`;
      
      // Random opacity
      particle.style.opacity = Math.random() * 0.5 + 0.3;
      
      // Glassy gradient background
      particle.style.background = `linear-gradient(135deg, 
        rgba(255, 255, 255, 0.4) 0%, 
        rgba(255, 255, 255, 0.1) 100%)`;
      
      particlesContainer.appendChild(particle);
    }
    
    // Ripple effect for buttons
    document.addEventListener('click', function(e) {
      if (e.target.classList.contains('submit-btn') || 
          e.target.classList.contains('modal-btn')) {
        
        const btn = e.target;
        const rect = btn.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        
        const ripple = document.createElement('span');
        ripple.classList.add('ripple');
        ripple.style.left = `${x}px`;
        ripple.style.top = `${y}px`;
        
        btn.appendChild(ripple);
        
        setTimeout(() => {
          ripple.remove();
        }, 800);
      }
    });
    
    // Form submission
    document.getElementById('loginForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const btn = document.getElementById('loginBtn');
      
      // Simulate loading
      btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Authenticating...';
      btn.disabled = true;
      
      // Simulate API call
      setTimeout(() => {
        // Show success animation
        document.getElementById('successAnimation').classList.add('show');
        
        // Redirect after animation
        setTimeout(() => {
          window.location.href = 'main_page.html';
        }, 2500);
      }, 1500);
    });
    
    // OTP Modal functionality
    const otpModal = document.getElementById('otpModal');
    const forgotPasswordLink = document.getElementById('forgotPasswordLink');
    const closeModal = document.getElementById('closeModal');
    const sendOtpBtn = document.getElementById('sendOtpBtn');
    const otpSection = document.getElementById('otpSection');
    const verifyOtpBtn = document.getElementById('verifyOtpBtn');
    const otpInputs = document.querySelectorAll('.otp-input');
    
    // Show modal when forgot password is clicked
    forgotPasswordLink.addEventListener('click', function(e) {
      e.preventDefault();
      otpModal.classList.add('active');
    });
    
    // Close modal
    closeModal.addEventListener('click', function() {
      otpModal.classList.remove('active');
      otpSection.style.display = 'none';
    });
    
    // Send OTP
    sendOtpBtn.addEventListener('click', function() {
      const email = document.getElementById('resetEmail').value;
      
      if (!email) {
        alert('Please enter your email address');
        return;
      }
      
      // Simulate sending OTP
      sendOtpBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
      
      setTimeout(() => {
        sendOtpBtn.innerHTML = 'OTP Sent!';
        otpSection.style.display = 'block';
        
        // Auto-focus first OTP input
        otpInputs[0].focus();
        
        // Reset button after delay
        setTimeout(() => {
          sendOtpBtn.innerHTML = 'Send OTP';
        }, 2000);
      }, 1500);
    });
    
    // OTP input navigation
    otpInputs.forEach((input, index) => {
      input.addEventListener('input', function() {
        if (this.value.length === 1) {
          if (index < otpInputs.length - 1) {
            otpInputs[index + 1].focus();
          } else {
            this.blur();
          }
        }
      });
      
      input.addEventListener('keydown', function(e) {
        if (e.key === 'Backspace' && this.value.length === 0 && index > 0) {
          otpInputs[index - 1].focus();
        }
      });
    });
    
    // Verify OTP
    verifyOtpBtn.addEventListener('click', function() {
      let otp = '';
      otpInputs.forEach(input => {
        otp += input.value;
      });
      
      if (otp.length !== 4) {
        alert('Please enter the complete 4-digit OTP');
        return;
      }
      
      // Simulate OTP verification
      verifyOtpBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Verifying...';
      
      setTimeout(() => {
        verifyOtpBtn.innerHTML = 'Verified!';
        
        // Show success and close modal
        setTimeout(() => {
          otpModal.classList.remove('active');
          otpSection.style.display = 'none';
          verifyOtpBtn.innerHTML = 'Verify OTP';
          
          // Reset OTP inputs
          otpInputs.forEach(input => {
            input.value = '';
          });
          
          // Show success message
          alert('Password reset link has been sent to your email!');
        }, 1000);
      }, 1500);
    });
  </script>
</body>
</html>